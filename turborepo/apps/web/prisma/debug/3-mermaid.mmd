erDiagram

        SenderType {
            USER USER
AI AI
SYSTEM SYSTEM
        }
    


        ThemePreference {
            LIGHT LIGHT
DARK DARK
SYSTEM SYSTEM
        }
    


        Provider {
            OPENAI OPENAI
ANTHROPIC ANTHROPIC
X_AI X_AI
GEMINI GEMINI
META META
        }
    
  "User" {
    String id "🗝️"
    String name "❓"
    String email 
    DateTime emailVerified "❓"
    String image "❓"
    DateTime createdAt 
    DateTime updatedAt 
    }
  

  "Profile" {
    String id "🗝️"
    String bio "❓"
    String city "❓"
    String country "❓"
    String userId 
    }
  

  "Account" {
    String id "🗝️"
    String userId 
    String type 
    String provider 
    String providerAccountId 
    String refresh_token "❓"
    String access_token "❓"
    Int expires_at "❓"
    String token_type "❓"
    String scope "❓"
    String id_token "❓"
    String session_state "❓"
    }
  

  "Session" {
    String id "🗝️"
    String sessionToken 
    String userId 
    DateTime expires 
    DateTime createdAt 
    DateTime updatedAt 
    }
  

  "UserKey" {
    String id "🗝️"
    String userId 
    Provider provider 
    String apiKey 
    DateTime createdAt 
    DateTime updatedAt 
    }
  

  "Settings" {
    String id "🗝️"
    String userId 
    ThemePreference theme "❓"
    }
  

  "AiAgent" {
    String id "🗝️"
    Provider provider 
    String model 
    String displayName "❓"
    String description "❓"
    }
  

  "Conversation" {
    String id "🗝️"
    String userId 
    String userKeyId 
    String title "❓"
    DateTime createdAt 
    DateTime updatedAt 
    String aiAgentId "❓"
    String branchId "❓"
    String parentId "❓"
    Boolean isShared 
    String shareToken "❓"
    }
  

  "Message" {
    String id "🗝️"
    String conversationId 
    String userId "❓"
    SenderType senderType 
    Provider provider 
    String model "❓"
    String apiKey 
    String content 
    DateTime createdAt 
    DateTime updatedAt 
    String aiAgentId "❓"
    }
  

  "Attachment" {
    String id "🗝️"
    String messageId 
    String url 
    String type 
    DateTime createdAt 
    String conversationId "❓"
    }
  

  "VerificationToken" {
    String identifier "🗝️"
    String token "🗝️"
    DateTime expires 
    }
  
    "User" o{--}o "Profile" : "profile"
    "User" o{--}o "Account" : "accounts"
    "User" o{--}o "Session" : "sessions"
    "User" o{--}o "UserKey" : "keys"
    "User" o{--}o "Conversation" : "conversations"
    "User" o{--}o "Settings" : "settings"
    "Profile" o|--|| "User" : "user"
    "Account" o|--|| "User" : "user"
    "Session" o|--|| "User" : "user"
    "UserKey" o|--|| "Provider" : "enum:provider"
    "UserKey" o|--|| "User" : "user"
    "Settings" o|--|| "User" : "user"
    "Settings" o|--|o "ThemePreference" : "enum:theme"
    "AiAgent" o|--|| "Provider" : "enum:provider"
    "AiAgent" o{--}o "Conversation" : "conversations"
    "Conversation" o|--|| "User" : "user"
    "Conversation" o{--}o "Message" : "messages"
    "Conversation" o|--|o "AiAgent" : "aiAgent"
    "Conversation" o{--}o "Attachment" : "attachments"
    "Message" o|--|| "SenderType" : "enum:senderType"
    "Message" o|--|| "Provider" : "enum:provider"
    "Message" o{--}o "Attachment" : "attachments"
    "Message" o|--|| "Conversation" : "conversation"
    "Attachment" o|--|o "Conversation" : "conversation"
    "Attachment" o|--|| "Message" : "message"
