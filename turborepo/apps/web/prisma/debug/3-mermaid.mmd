erDiagram

        SenderType {
            USER USER
AI AI
SYSTEM SYSTEM
        }
    


        ThemePreference {
            LIGHT LIGHT
DARK DARK
SYSTEM SYSTEM
        }
    


        Provider {
            OPENAI OPENAI
ANTHROPIC ANTHROPIC
X_AI X_AI
GEMINI GEMINI
META META
        }
    
  "User" {
    String id "ğŸ—ï¸"
    String name "â“"
    String email 
    DateTime emailVerified "â“"
    String image "â“"
    DateTime createdAt 
    DateTime updatedAt 
    }
  

  "Profile" {
    String id "ğŸ—ï¸"
    String bio "â“"
    String city "â“"
    String country "â“"
    String userId 
    }
  

  "Account" {
    String id "ğŸ—ï¸"
    String userId 
    String type 
    String provider 
    String providerAccountId 
    String refresh_token "â“"
    String access_token "â“"
    Int expires_at "â“"
    String token_type "â“"
    String scope "â“"
    String id_token "â“"
    String session_state "â“"
    }
  

  "Session" {
    String id "ğŸ—ï¸"
    String sessionToken 
    String userId 
    DateTime expires 
    DateTime createdAt 
    DateTime updatedAt 
    }
  

  "UserKey" {
    String id "ğŸ—ï¸"
    String userId 
    Provider provider 
    String apiKey 
    DateTime createdAt 
    DateTime updatedAt 
    }
  

  "Settings" {
    String id "ğŸ—ï¸"
    String userId 
    ThemePreference theme "â“"
    }
  

  "AiAgent" {
    String id "ğŸ—ï¸"
    Provider provider 
    String model 
    String displayName "â“"
    String description "â“"
    }
  

  "Conversation" {
    String id "ğŸ—ï¸"
    String userId 
    String userKeyId 
    String title "â“"
    DateTime createdAt 
    DateTime updatedAt 
    String aiAgentId "â“"
    String branchId "â“"
    String parentId "â“"
    Boolean isShared 
    String shareToken "â“"
    }
  

  "Message" {
    String id "ğŸ—ï¸"
    String conversationId 
    String userId "â“"
    SenderType senderType 
    Provider provider 
    String model "â“"
    String apiKey 
    String content 
    DateTime createdAt 
    DateTime updatedAt 
    String aiAgentId "â“"
    }
  

  "Attachment" {
    String id "ğŸ—ï¸"
    String messageId 
    String url 
    String type 
    DateTime createdAt 
    String conversationId "â“"
    }
  

  "VerificationToken" {
    String identifier "ğŸ—ï¸"
    String token "ğŸ—ï¸"
    DateTime expires 
    }
  
    "User" o{--}o "Profile" : "profile"
    "User" o{--}o "Account" : "accounts"
    "User" o{--}o "Session" : "sessions"
    "User" o{--}o "UserKey" : "keys"
    "User" o{--}o "Conversation" : "conversations"
    "User" o{--}o "Settings" : "settings"
    "Profile" o|--|| "User" : "user"
    "Account" o|--|| "User" : "user"
    "Session" o|--|| "User" : "user"
    "UserKey" o|--|| "Provider" : "enum:provider"
    "UserKey" o|--|| "User" : "user"
    "Settings" o|--|| "User" : "user"
    "Settings" o|--|o "ThemePreference" : "enum:theme"
    "AiAgent" o|--|| "Provider" : "enum:provider"
    "AiAgent" o{--}o "Conversation" : "conversations"
    "Conversation" o|--|| "User" : "user"
    "Conversation" o{--}o "Message" : "messages"
    "Conversation" o|--|o "AiAgent" : "aiAgent"
    "Conversation" o{--}o "Attachment" : "attachments"
    "Message" o|--|| "SenderType" : "enum:senderType"
    "Message" o|--|| "Provider" : "enum:provider"
    "Message" o{--}o "Attachment" : "attachments"
    "Message" o|--|| "Conversation" : "conversation"
    "Attachment" o|--|o "Conversation" : "conversation"
    "Attachment" o|--|| "Message" : "message"
